<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>Startshineye的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="毕业于石大，相信技术可以改变人与人之间的生活，码农一枚">
<meta property="og:type" content="website">
<meta property="og:title" content="Startshineye的博客">
<meta property="og:url" content="https://github.com/startshineye/page/9/index.html">
<meta property="og:site_name" content="Startshineye的博客">
<meta property="og:description" content="毕业于石大，相信技术可以改变人与人之间的生活，码农一枚">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Startshineye的博客">
<meta name="twitter:description" content="毕业于石大，相信技术可以改变人与人之间的生活，码农一枚">
  
    <link rel="alternative" href="/atom.xml" title="Startshineye的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <script src="/style.js"></script>
  

</head>

<body>
  <div id="container">
    <div class="left-col">
      <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			 <img src="https://raw.githubusercontent.com/startshineye/img/master/2017/king.jpg" class="js-avatar show">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Startshineye</a></h1>
		</hgroup>

		
		<p class="header-subtitle">淡泊明志，宁静致远</p>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
				<li><a href="/archives">所有文章</a></li>
	        
				<li><a href="/tags/随笔">随笔</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
	        
    		
    			
    			<a class="js-smart-menu" data-idx="0" href="javascript:void(0)">所有文章</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="1" href="javascript:void(0)">标签</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="2" href="javascript:void(0)">友链</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="3" href="javascript:void(0)">关于我</a>
    			
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/startshineye" title="github">github</a>
		        
					<a class="weibo" target="_blank" href="#" title="weibo">weibo</a>
		        
					<a class="rss" target="_blank" href="#" title="rss">rss</a>
		        
					<a class="zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
		        
					<a class="mail" target="_blank" href="#" title="mail">mail</a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"><i class="icon-list"></i></div>
  		<h1 class="header-author js-mobile-header hide">Startshineye</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				
					<img src="https://raw.githubusercontent.com/startshineye/img/master/2017/king.jpg" class="js-avatar show">
				
			</div>
			<hgroup>
			  <h1 class="header-author">Startshineye</h1>
			</hgroup>
			
			<p class="header-subtitle">淡泊明志，宁静致远</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/tags/随笔">随笔</a></li>
		        
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/startshineye" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="#" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="#" title="rss">rss</a>
			        
						<a class="zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
			        
						<a class="mail" target="_blank" href="#" title="mail">mail</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
        
  
    <article id="post-SpringBoot-29-导入xml配置" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/16/SpringBoot-29-导入xml配置/">SpringBoot(29)-导入xml配置</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>SpringBoot理念:零配置编程,但是需要xml的配置(比如:用ehcache时候),只需要使用注解:@Configuration,使用@ImortResource注解以及 xml文件</p>
<h4 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h4><p>1.建立maven工程<br>2.App.java类编写XmlService2<br>3.在App.java类无法扫描的包编写XmlService<br>4.编写application-bean.xml注入XmlService<br>5.编写配置类：ConfigClass注入配置文件application-bean.xml<br>6.编写App.java启动类测试<br>7.注意事项  </p>
<h5 id="1-建立maven工程"><a href="#1-建立maven工程" class="headerlink" title="1.建立maven工程"></a>1.建立maven工程</h5><p> 建立spring-boot-xml项目    </p>
<h5 id="2-App-java类编写XmlService2"><a href="#2-App-java类编写XmlService2" class="headerlink" title="2.App.java类编写XmlService2"></a>2.App.java类编写XmlService2</h5><p>首先我们这里有几个包：com.yxm,org.yxm,我们这里打算把App.java启动类放到com.yxmt中，根据Spring Boot扫描（根包到子包的原则），我们把HelloService2写在Spring Boot可以扫描的位置，HelloService写在Spring Boot无法扫描到的位置，那么我们使用配置文件bean的方式进行引入，具体代码如下：</p>
<pre><code>package com.yxm.service;
import org.springframework.stereotype.Service;
@Service
public class XmlService2 {
/**
 * 启动时候观察控制台是否打印此信息
 */
public void xmlPrint(){
    System.out.println(&quot;---------XmlService2.xmlPrint() 执行---------------&quot;);
 }
}
</code></pre><h5 id="3-在App-java类无法扫描的包编写XmlService"><a href="#3-在App-java类无法扫描的包编写XmlService" class="headerlink" title="3.在App.java类无法扫描的包编写XmlService"></a>3.在App.java类无法扫描的包编写XmlService</h5><p>注意这个类是写在Spring Boot无法自动扫描的位置，正常启动之后，如果引入HelloService的话肯定会报异常的，因为它根本没有被注入成功，具体代码如下:</p>
<pre><code>package org.yxm.service;
import org.springframework.stereotype.Service;
@Service
public class XmlService {
public void xmlPrint(){
    System.out.println(&quot;===========XmlService.xmlPrint()执行============&quot;);
 }
}
</code></pre><h5 id="4-编写application-bean-xml注入XmlService"><a href="#4-编写application-bean-xml注入XmlService" class="headerlink" title="4.编写application-bean.xml注入XmlService"></a>4.编写application-bean.xml注入XmlService</h5><p>在src/main/resouces下编写配置文件application-bean.xml文件：</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;
&lt;bean id=&quot;xmlService&quot; class=&quot;org.yxm.service.XmlService&quot;&gt;&lt;/bean&gt;
&lt;/beans&gt;
</code></pre><h5 id="5-编写配置类：ConfigClass注入配置文件application-bean-xml"><a href="#5-编写配置类：ConfigClass注入配置文件application-bean-xml" class="headerlink" title="5.编写配置类：ConfigClass注入配置文件application-bean.xml"></a>5.编写配置类：ConfigClass注入配置文件application-bean.xml</h5><p>在com.kfit.config包下编写类ConfigClass，这个确保能被Spring Boot可以扫描到，不然一切都付之东流了，具体代码如下： </p>
<pre><code>package com.yxm.config;
 import org.springframework.context.annotation.Configuration;
 import org.springframework.context.annotation.ImportResource;
 /**
  * classpath路径：locations={&quot;classpath:application-bean1.xml&quot;,&quot;classpath:application-bean2.xml&quot;}
  * file路径： locations = {&quot;file:d:/test/application-bean1.xml&quot;};
  */
 @Configuration
 @ImportResource(locations={&quot;classpath:application-bean.xml&quot;})
 public class ConfigClass {

 }
</code></pre><h5 id="6-编写App-java启动类测试"><a href="#6-编写App-java启动类测试" class="headerlink" title="6.编写App.java启动类测试"></a>6.编写App.java启动类测试</h5><pre><code>@SpringBootApplication
public class App 
{
public static void main( String[] args )
{
    SpringApplication.run(App.class, args);
 }
}
</code></pre><h5 id="7-注意事项"><a href="#7-注意事项" class="headerlink" title="7.注意事项"></a>7.注意事项</h5><p>ImportResouce有两种常用的引入方式：classpath和file  </p>
<pre><code>classpath路径：locations={&quot;classpath:application-bean1.xml&quot;,
&quot;classpath:application-bean2.xml&quot;
 }
file路径：
locations = {&quot;file:d:/test/application-bean1.xml&quot;};
</code></pre><h5 id="8-测试"><a href="#8-测试" class="headerlink" title="8.测试"></a>8.测试</h5><p><img src="https://raw.githubusercontent.com/startshineye/img/master/2017/9/17.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/startshineye/img/master/2017/9/18.png" alt=""><br>去掉ConfigClass里面的@Configuration  </p>
<pre><code>@ImportResource(locations={&quot;classpath:application-bean.xml&quot;})
public class ConfigClass {

}
</code></pre><p>App中run as java application<br><img src="https://raw.githubusercontent.com/startshineye/img/master/2017/9/19.png" alt=""></p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/09/16/SpringBoot-29-导入xml配置/" class="archive-article-date">
  	<time datetime="2017-09-16T01:43:05.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-09-16</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringBoot/">SpringBoot</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-SpringBoot-28-SpringBoot文件-多文件-上传" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/14/SpringBoot-28-SpringBoot文件-多文件-上传/">SpringBoot(28)-SpringBoot文件(多文件)上传</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>文件上传步骤:<br>1.新建maven java project<br>2.在pom.xml加入依赖<br>3.建立表单页面<br>4.编写controller<br>5.测试<br>6.上传文件限制<br>7.多文件上传  </p>
<h5 id="1-新建maven-java-project"><a href="#1-新建maven-java-project" class="headerlink" title="1.新建maven java project"></a>1.新建maven java project</h5><p>新建spring-boot-fileupload</p>
<p>application.properties:  </p>
<pre><code>server.port=8081
spring.thymeleaf.suffix=.html
spring.thymeleaf.encoding=UTF-8
spring.thymeleaf.cache=false 
</code></pre><h5 id="2-在pom-xml加入依赖"><a href="#2-在pom-xml加入依赖" class="headerlink" title="2.在pom.xml加入依赖"></a>2.在pom.xml加入依赖</h5><p>加入以下依赖:1.spring-boot父节点依赖 2.jdk版本 3.spring-boot的web依赖 4.thmleaf模板  </p>
<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
&lt;groupId&gt;com.yxm&lt;/groupId&gt;
&lt;artifactId&gt;spring-boot-fileupload1&lt;/artifactId&gt;
&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
&lt;packaging&gt;jar&lt;/packaging&gt;
&lt;name&gt;spring-boot-fileupload1&lt;/name&gt;
&lt;url&gt;http://maven.apache.org&lt;/url&gt;
&lt;parent&gt;
 &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
 &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
 &lt;version&gt;1.4.1.RELEASE&lt;/version&gt;
&lt;/parent&gt;
&lt;properties&gt;
&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
&lt;java-version&gt;1.8&lt;/java-version&gt;
&lt;/properties&gt;
&lt;dependencies&gt;
 &lt;!-- mvc --&gt;
 &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
            &lt;!-- 
                &lt;version&gt;&lt;/version&gt;
                由于我们在上面指定了 parent(spring boot)
             --&gt;
&lt;/dependency&gt;  
&lt;!-- thmleaf --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;    
&lt;/dependency&gt;
&lt;/dependencies&gt;
&lt;build&gt;
   &lt;plugins&gt;
       &lt;!-- 编译版本; --&gt;
       &lt;plugin&gt;
          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
          &lt;configuration&gt;
              &lt;source&gt;1.8&lt;/source&gt;
              &lt;target&gt;1.8&lt;/target&gt;
          &lt;/configuration&gt;
       &lt;/plugin&gt;
   &lt;/plugins&gt;
&lt;/build&gt;
&lt;/project&gt;
</code></pre><h5 id="3-建立表单页面"><a href="#3-建立表单页面" class="headerlink" title="3.建立表单页面"></a>3.建立表单页面</h5><pre><code>&lt;!DOCTYPE html&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;
  xmlns:sec=&quot;http://www.thymeleaf.org/thymeleaf-extras-springsecurity3&quot;&gt;
&lt;head&gt;
  &lt;title&gt;spring-boot文件上传&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
   &lt;form action=&quot;/upload&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
                   文件:&lt;input type=&quot;file&quot; name=&quot;file&quot;/&gt;
        &lt;input type=&quot;submit&quot; value=&quot;上传&quot;/&gt;
   &lt;/form&gt;
 &lt;/body&gt;   
 &lt;/html&gt;
</code></pre><h5 id="4-编写controller"><a href="#4-编写controller" class="headerlink" title="4.编写controller"></a>4.编写controller</h5><pre><code>**
* 文件上传工具类:主要提供:供访问的/file路径  post上传的/upload方法
* @author Administrator
*
*/
@Controller
public class FileUploadController {
@RequestMapping(&quot;/file&quot;)
public String file(){
    return &quot;file&quot;;
}

@RequestMapping(&quot;/upload&quot;)
@ResponseBody
public Object upload(@RequestParam(&quot;file&quot;)MultipartFile file){

        if(!file.isEmpty()){
            try {
                FileOutputStream fileOutputStream = new FileOutputStream(new File(file.getOriginalFilename()));
                BufferedOutputStream out = new BufferedOutputStream(fileOutputStream);
                out.write(file.getBytes());
                out.flush();
                out.close();
                return &quot;上传成功&quot;;
            } catch (FileNotFoundException e) {
                e.printStackTrace();
                 return&quot;上传失败,&quot;+e.getMessage();
            } catch (IOException e) {
                e.printStackTrace();
                 return&quot;上传失败,&quot;+e.getMessage();
            }
        }else{
            return &quot;文件为空,上传失败&quot;;
        }
}
}
</code></pre><p>App:</p>
<pre><code>@SpringBootApplication
public class App 
{
public static void main( String[] args )
{
    SpringApplication.run(App.class, args);
}
}
</code></pre><h5 id="5-测试"><a href="#5-测试" class="headerlink" title="5.测试"></a>5.测试</h5><p><img src="https://raw.githubusercontent.com/startshineye/img/master/2017/9/14.gif" alt=""></p>
<h5 id="6-上传文件限制"><a href="#6-上传文件限制" class="headerlink" title="6.上传文件限制"></a>6.上传文件限制</h5><p>对文件做一些限制是有必要的，在App.java进行编码配置：<br>限制之后就报错了:  </p>
<pre><code>@SpringBootApplication
public class App 
{
@Bean
public MultipartConfigElement mutipartConfi(){
    MultipartConfigFactory factory = new MultipartConfigFactory();
    //// 设置文件大小限制 ,超了，页面会抛出异常信息，这时候就需要进行异常信息的处理了;
    factory.setMaxFileSize(&quot;128KB&quot;); //KB,MB
    /// 设置总上传数据总大小
    factory.setMaxRequestSize(&quot;256KB&quot;); 
    //Sets the directory location where files will be stored.
    //factory.setLocation(&quot;路径地址&quot;);
    return factory.createMultipartConfig(); 
}

public static void main( String[] args )
{
    SpringApplication.run(App.class, args);
}
}
</code></pre><p><img src="https://raw.githubusercontent.com/startshineye/img/master/2017/9/16.gif" alt=""></p>
<h5 id="7-多文件上传"><a href="#7-多文件上传" class="headerlink" title="7.多文件上传"></a>7.多文件上传</h5><p>多文件对于前段页面比较简单，具体代码实现：  </p>
<p>mutifile.html:  </p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;
  xmlns:sec=&quot;http://www.thymeleaf.org/thymeleaf-extras-springsecurity3&quot;&gt;
&lt;head&gt;
  &lt;title&gt;spring-boot多文件上传&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
   &lt;form action=&quot;/mutiupload&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
                  &lt;p&gt; 文件1:&lt;input type=&quot;file&quot; name=&quot;file&quot;/&gt;&lt;/p&gt;
                  &lt;p&gt; 文件2:&lt;input type=&quot;file&quot; name=&quot;file&quot;/&gt;&lt;/p&gt;
                  &lt;p&gt; 文件3:&lt;input type=&quot;file&quot; name=&quot;file&quot;/&gt;&lt;/p&gt;
                  &lt;p&gt; 文件4:&lt;input type=&quot;file&quot; name=&quot;file&quot;/&gt;&lt;/p&gt;
                  &lt;input type=&quot;submit&quot; value=&quot;上传&quot;/&gt;
   &lt;/form&gt;
 &lt;/body&gt;   
 &lt;/html&gt;
</code></pre><p>controller:</p>
<pre><code>**
* 文件上传工具类:主要提供:供访问的/file路径  post上传的/upload方法
* @author Administrator
*
*/
@Controller
public class FileUploadController {
@RequestMapping(&quot;/file&quot;)
public String file(){
    return &quot;file&quot;;
}
@RequestMapping(&quot;/mutifile&quot;)
public String mutifile(){
    return &quot;mutifile&quot;;
}
@RequestMapping(&quot;/upload&quot;)
@ResponseBody
public Object upload(@RequestParam(&quot;file&quot;)MultipartFile file){
        if(!file.isEmpty()){
            try {
                FileOutputStream fileOutputStream = new FileOutputStream(new File(file.getOriginalFilename()));
                BufferedOutputStream out = new BufferedOutputStream(fileOutputStream);
                out.write(file.getBytes());
                out.flush();
                out.close();
                return &quot;上传成功&quot;;
            } catch (FileNotFoundException e) {
                e.printStackTrace();
                 return&quot;上传失败,&quot;+e.getMessage();
            } catch (IOException e) {
                e.printStackTrace();
                 return&quot;上传失败,&quot;+e.getMessage();
            }
        }else{
            return &quot;文件为空,上传失败&quot;;
        }
}

/**
 * 多文件具体上传时间，主要是使用了MultipartHttpServletRequest和MultipartFile
 * @param request
 * @return
 */
@RequestMapping(value=&quot;/mutiupload&quot;, method= RequestMethod.POST) 
public@ResponseBody 
String handleFileUpload(HttpServletRequest request){ 
    List&lt;MultipartFile&gt; files = ((MultipartHttpServletRequest)request).getFiles(&quot;file&quot;); 
    MultipartFile file = null;
    BufferedOutputStream stream = null;
    for (int i =0; i&lt; files.size(); ++i) { 
        file = files.get(i); 
        if (!file.isEmpty()) { 
            try { 
                byte[] bytes = file.getBytes(); 
                stream = 
                        new BufferedOutputStream(new FileOutputStream(new File(file.getOriginalFilename()))); 
                stream.write(bytes); 
                stream.close(); 
            } catch (Exception e) { 
                stream =  null;
                return&quot;You failed to upload &quot; + i + &quot; =&gt; &quot; + e.getMessage(); 
            } 
        } else { 
            return&quot;You failed to upload &quot; + i + &quot; because the file was empty.&quot;; 
        } 
    } 
    return&quot;upload successful&quot;; 
} 
}
</code></pre><p><img src="https://raw.githubusercontent.com/startshineye/img/master/2017/9/15.gif" alt=""></p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/09/14/SpringBoot-28-SpringBoot文件-多文件-上传/" class="archive-article-date">
  	<time datetime="2017-09-14T15:31:22.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-09-14</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringBoot/">SpringBoot</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-SpringBoot-27-SpringBoot启动时Banner设置" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/14/SpringBoot-27-SpringBoot启动时Banner设置/">SpringBoot(27)-SpringBoot启动时Banner设置</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>SpringBoot启动时候默认打印的Banner如下图:<br><img src="https://raw.githubusercontent.com/startshineye/img/master/2017/9/15.png" alt=""></p>
<h4 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h4><p>想要修改以上默认的Banner有以下四种方式:<br>1).Application的main方法中进行设置<br>2).修改banner.txt配置文件<br>3).重写接口Banner实现<br>4).application.properties进行配置  </p>
<h5 id="1-Application的main方法中进行设置"><a href="#1-Application的main方法中进行设置" class="headerlink" title="1.Application的main方法中进行设置"></a>1.Application的main方法中进行设置</h5><pre><code>@SpringBootApplication
public class App 
{
public static void main( String[] args )
{

    /**
     * 使用SpringApplication.run启动应用
     */
    SpringApplication application = new SpringApplication(App.class);
    /**
     * Banner.Mode.OFF:关闭;
     * Banner.Mode.CONSOLE:控制台输出:默认;
     * Banner.Mode.LOG:日志方式输出;
     */
    application.setBannerMode(Banner.Mode.OFF);
    application.run(args);
 }
}
</code></pre><h5 id="2-修改banner-txt配置文件"><a href="#2-修改banner-txt配置文件" class="headerlink" title="2.修改banner.txt配置文件"></a>2.修改banner.txt配置文件</h5><p>在src/main/resouces下新建banner.txt，在文件中加入：</p>
<p>//这个是MANIFEST.MF文件中的版本号<br>${application.version}              </p>
<p>//这个是上面的的版本号前面加v后上括号<br>${application.formatted-version}</p>
<p>//这个是springboot的版本号<br>${spring-boot.version}             </p>
<p>//这个是springboot的版本号<br>${spring-boot.formatted-version}</p>
<p><img src="https://raw.githubusercontent.com/startshineye/img/master/2017/9/16.png" alt="">  </p>
<h5 id="3-重写接口Banner实现"><a href="#3-重写接口Banner实现" class="headerlink" title="3.重写接口Banner实现"></a>3.重写接口Banner实现</h5><p>SpringBoot提供了一个接口org.springframework.boot.Banner，他的实例可以被传给SpringApplication的setBanner(banner)方法</p>
<h5 id="4-application-properties进行配置"><a href="#4-application-properties进行配置" class="headerlink" title="4.application.properties进行配置"></a>4.application.properties进行配置</h5><p>在application.proerpties进行banner的显示和关闭：</p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/09/14/SpringBoot-27-SpringBoot启动时Banner设置/" class="archive-article-date">
  	<time datetime="2017-09-14T14:50:20.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-09-14</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringBoot/">SpringBoot</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-SpringBoot-26-SpringBoot单元测试" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/14/SpringBoot-26-SpringBoot单元测试/">SpringBoot(26)-SpringBoot单元测试</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>也许很多人写代码时候不写测试用例,但是要知道单元测试在工作是非常重要的.  </p>
<p>重要性:  </p>
<ol>
<li>避免测试点的遗漏,提高测试效率  </li>
<li>自动测试,可以在项目打包前进行测试校验  </li>
<li>及时发现因为修改代码导致新的问题的出现，并及时解决  </li>
</ol>
<h4 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h4><p>由于我们实际开发中大都是对业务代码进行测试,也就是Service层代码进行测试,所以以Service代码测试为例:<br>SpringBoot单元测试步骤:<br>1.加入依赖<br>2.编写测试service<br>3.编写测试类  </p>
<h5 id="1-加入依赖"><a href="#1-加入依赖" class="headerlink" title="1.加入依赖"></a>1.加入依赖</h5><p>加入以下依赖:  </p>
<pre><code>&lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
        &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
</code></pre><p>如果我们添加的 依赖马上没有起效,我们可以:<br><img src="https://raw.githubusercontent.com/startshineye/img/master/2017/9/13.png" alt=""></p>
<h5 id="2-编写service"><a href="#2-编写service" class="headerlink" title="2.编写service"></a>2.编写service</h5><pre><code>import org.springframework.stereotype.Service;
@Service
public class HelloService {
public String printHello(){
    return &quot;hello&quot;;
}
}
</code></pre><h5 id="3-编写测试类"><a href="#3-编写测试类" class="headerlink" title="3.编写测试类"></a>3.编写测试类</h5><pre><code>import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.SpringApplicationConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.test.context.web.WebAppConfiguration;
import com.yxm.App;
import com.yxm.junit.service.HelloService;
//SpringJUnit支持，由此引入Spring-Test框架支持！
@RunWith(SpringJUnit4ClassRunner.class)
//指定SpringBoot工程启动工程
@SpringApplicationConfiguration(classes = App.class)
@WebAppConfiguration
public class TestHelloService {
//测试service
//@Autowired
@Autowired
private HelloService service;
@Test
public void testPrintHello(){
    Assert.assertEquals(&quot;hello&quot;, service.printHello());
}
}
</code></pre><p>右键—Run As – Junit Test:<br><img src="https://raw.githubusercontent.com/startshineye/img/master/2017/9/14.png" alt="">  </p>
<h5 id="4-Junit基本注解介绍"><a href="#4-Junit基本注解介绍" class="headerlink" title="4. Junit基本注解介绍"></a>4. Junit基本注解介绍</h5><p>//在所有测试方法前执行一次，一般在其中写上整体初始化的代码<br>@BeforeClass</p>
<p>//在所有测试方法后执行一次，一般在其中写上销毁和释放资源的代码<br>@AfterClass</p>
<p>//在每个测试方法前执行，一般用来初始化方法（比如我们在测试别的方法时，类中与其他测试方法共享的值已经被改变，为了保证测试结果的有效性，我们会在@Before注解的方法中重置数据）<br>@Before</p>
<p>//在每个测试方法后执行，在方法执行完成后要做的事情<br>@After</p>
<p>// 测试方法执行超过1000毫秒后算超时，测试将失败<br>@Test(timeout = 1000)</p>
<p>// 测试方法期望得到的异常类，如果方法执行没有抛出指定的异常，则测试失败<br>@Test(expected = Exception.class)</p>
<p>// 执行测试时将忽略掉此方法，如果用于修饰类，则忽略整个类<br>@Ignore(“not ready yet”) </p>
<p>@Test</p>
<p>@RunWith </p>
<p>在JUnit中有很多个Runner，他们负责调用你的测试代码，每一个Runner都有各自的特殊功能，你要根据需要选择不同的Runner来运行你的测试代码。 </p>
<p>如果我们只是简单的做普通Java测试，不涉及Spring Web项目，你可以省略@RunWith注解，这样系统会自动使用默认Runner来运行你的代码</p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/09/14/SpringBoot-26-SpringBoot单元测试/" class="archive-article-date">
  	<time datetime="2017-09-14T13:50:32.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-09-14</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringBoot/">SpringBoot</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-SpringBoot-25-改变自动扫描包路径" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/13/SpringBoot-25-改变自动扫描包路径/">SpringBoot(25)-改变自动扫描包路径</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>默认情况下SpringBoot会扫描启动类同包以及子包下的注解,但是有时候我们需要改变包的扫描方式,原理：@ComponentScan注解进行指定要扫描的包以及要扫描的类</p>
<h4 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h4><p>以下我们编写测试类测试:<br>三步:<br>1)新建两个包<br>2）新建两个类<br>3)启动类进行注解指定扫描路径  </p>
<h5 id="1-新建两个包"><a href="#1-新建两个包" class="headerlink" title="1.新建两个包"></a>1.新建两个包</h5><p> com.cn   com.org</p>
<h5 id="2-新建两个类"><a href="#2-新建两个类" class="headerlink" title="2.新建两个类"></a>2.新建两个类</h5><p>在这里为了方便测试，我们让我们的类在启动的时候就进行执行，所以我们就编写两个类，实现接口CommandLineRunner，这样在启动的时候我们就可以看到打印信息了。<br>注：类上添加@Configuration注解<br>Cn类:</p>
<pre><code>package com.cn;
import org.springframework.boot.CommandLineRunner;
import org.springframework.context.annotation.Configuration;
@Configuration
public class Cn implements CommandLineRunner{
public void run(String... arg0) throws Exception {
    System.out.println(&quot;com.cn 下类执行&quot;);
}
}
</code></pre><p>Org类:</p>
<pre><code>package com.org;
import org.springframework.boot.CommandLineRunner;
import org.springframework.context.annotation.Configuration;
@Configuration
public class Org implements CommandLineRunner{
public void run(String... arg0) throws Exception {
    System.out.println(&quot;com.org 下类执行&quot;);
}
}
</code></pre><h5 id="3-启动类进行注解指定扫描路径"><a href="#3-启动类进行注解指定扫描路径" class="headerlink" title="3.启动类进行注解指定扫描路径"></a>3.启动类进行注解指定扫描路径</h5><p>在App.java类中加入如下注解：<br> @ComponentScan(basePackages={“com.cn”,”com.org”})</p>
<pre><code>@SpringBootApplication
@ComponentScan(basePackages={&quot;com.cn&quot;,&quot;com.org&quot;})
public class App 
{
public static void main( String[] args )
 {
    /**
     * 使用SpringApplication.run启动应用
     */
    SpringApplication.run(App.class, args);
 }
}
</code></pre><p>输出：<br><img src="https://raw.githubusercontent.com/startshineye/img/master/2017/9/12.png" alt=""></p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/09/13/SpringBoot-25-改变自动扫描包路径/" class="archive-article-date">
  	<time datetime="2017-09-13T11:41:41.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-09-13</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringBoot/">SpringBoot</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-SpringBoot-24-使用自定义的properties" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/13/SpringBoot-24-使用自定义的properties/">SpringBoot(24)-使用自定义的properties</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>SpringBoot使用application.properties默认了很多配置,自己添加一些配置时候,该怎么做呢?或者自己建立一个.properties文件又该怎么办呢?  </p>
<h4 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h4><p>实现以上需求只需要三步:<br>1)构造自定义的properties文件(在原properties文件里面加入key或者自己创建一个.properties文件)<br>2)定义配置类<br>3)SpringBoot入口使用@EnableConfigurationProperties注解  </p>
<h5 id="1-构造自定义的properties文件"><a href="#1-构造自定义的properties文件" class="headerlink" title="1. 构造自定义的properties文件"></a>1. 构造自定义的properties文件</h5><h6 id="1-1-复用application-properties"><a href="#1-1-复用application-properties" class="headerlink" title="1.1 复用application.properties"></a>1.1 复用application.properties</h6><p>1.application.properties中添加  </p>
<pre><code>china.province=hunan
china.city=beijing
</code></pre><h6 id="1-2-创建person-properties"><a href="#1-2-创建person-properties" class="headerlink" title="1.2 创建person.properties"></a>1.2 创建person.properties</h6><p>1.创建person.properties</p>
<pre><code>person.name=zhangsan
person.age=23
</code></pre><p><img src="https://raw.githubusercontent.com/startshineye/img/master/2017/9/11.png" alt=""></p>
<h5 id="2-定义配置类-ConfigurationProperties"><a href="#2-定义配置类-ConfigurationProperties" class="headerlink" title="2.定义配置类( @ConfigurationProperties)"></a>2.定义配置类( @ConfigurationProperties)</h5><p>1.定义配置类: </p>
<pre><code>@ConfigurationProperties(prefix = &quot;china&quot;)  
public class China {
private String province;
private String city;

public String getProvince() {
    return province;
}

public void setProvince(String province) {
    this.province = province;
}

public String getCity() {
    return city;
}

public void setCity(String city) {
    this.city = city;
}
}
</code></pre><p>2.定义配置类  </p>
<pre><code>@ConfigurationProperties(prefix = &quot;person&quot;,locations = &quot;classpath:resources/person.properties&quot;)  
public class Person {
private String name;
private int age;

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public int getAge() {
    return age;
}

public void setAge(int age) {
    this.age = age;
}
}
</code></pre><h5 id="3-SpringBoot入口使用-EnableConfigurationProperties注解"><a href="#3-SpringBoot入口使用-EnableConfigurationProperties注解" class="headerlink" title="3.SpringBoot入口使用@EnableConfigurationProperties注解"></a>3.SpringBoot入口使用@EnableConfigurationProperties注解</h5><pre><code>@SpringBootApplication
@EnableConfigurationProperties({China.class,Person.class})
public class App 
{
public static void main( String[] args )
{
    /**
     * 使用SpringApplication.run启动应用
     */
    SpringApplication.run(App.class, args);
}
}
</code></pre><h5 id="4-测试-使用注解：-Autowired"><a href="#4-测试-使用注解：-Autowired" class="headerlink" title="4.测试(使用注解： @Autowired)"></a>4.测试(使用注解： @Autowired)</h5><pre><code>@RestController
public class PropertiesController {

@Autowired
private China china;

@Autowired
private Person person;

@RequestMapping(&quot;/testProperties&quot;)
public String TestProperties(){
    System.out.println(&quot;china[&quot;+china.getProvince()+&quot; &quot;+china.getCity()+&quot;]&quot;);
    System.out.println(&quot;person[&quot;+person.getName()+&quot; &quot;+person.getAge()+&quot;]&quot;);
    return &quot;ok&quot;;
}
}
</code></pre><p>请求:<a href="http://localhost:8081/testProperties" target="_blank" rel="external">http://localhost:8081/testProperties</a><br>输出：</p>
<pre><code>china[hunan beijing]
person[zhangsan 23]
</code></pre>
      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/09/13/SpringBoot-24-使用自定义的properties/" class="archive-article-date">
  	<time datetime="2017-09-12T16:06:46.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-09-13</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringBoot/">SpringBoot</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-SpringBoot-23-SpringBoot环境变量读取和属性对象的绑定" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/12/SpringBoot-23-SpringBoot环境变量读取和属性对象的绑定/">SpringBoot(23)-SpringBoot环境变量读取和属性对象的绑定</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="1-条件"><a href="#1-条件" class="headerlink" title="1.条件"></a>1.条件</h5><p>SpringBoot中想要获取环境变量读取和属性对象的绑定：<br>1)只要是Spring管理的类<br>2)实现接口 EnvironmentAware<br>3)重写方法 setEnvironment  </p>
<p>可以在工程启动时就可以获取</p>
<h5 id="2-代码示例"><a href="#2-代码示例" class="headerlink" title="2.代码示例"></a>2.代码示例</h5><h6 id="2-1-一般类通过实现EnvironmentAware接口"><a href="#2-1-一般类通过实现EnvironmentAware接口" class="headerlink" title="2.1 一般类通过实现EnvironmentAware接口"></a>2.1 一般类通过实现EnvironmentAware接口</h6><p>条件:<br>1)@Configuration<br>2)实现EnvironmentAware  </p>
<pre><code>import org.springframework.beans.factory.annotation.Value;
import org.springframework.boot.bind.RelaxedPropertyResolver;
import org.springframework.context.EnvironmentAware;
import org.springframework.context.annotation.Configuration;
import org.springframework.core.env.Environment;
@Configuration
public class MyEnviromentAware implements EnvironmentAware{

//注入application.properties的属性到指定变量中
@Value(&quot;${spring.datasource.url}&quot;)
private String url;

//重写的方法setEnvironment是在系统启动的时间被执行
public void setEnvironment(Environment environment) {

    //打印注入的属性信息
    System.out.println(&quot;url[&quot;+url+&quot;]&quot;);

    //系统environment获取到系统属性
    System.out.println(environment.getProperty(&quot;JAVA_HOME&quot;));

    //通过enviroment获取到application.properties配置的属性.
    System.out.println(environment.getProperty(&quot;spring.datasource.url&quot;));

    //获取到前缀是&quot;spring.datasource.&quot; 的属性列表值.
    RelaxedPropertyResolver relaxedPropertyResolver = new RelaxedPropertyResolver(environment, &quot;spring.datasource.&quot;);
    System.out.println(&quot;spring.datasource.url=&quot;+relaxedPropertyResolver.getProperty(&quot;url&quot;));
  }
}
</code></pre><p>输出:<img src="https://raw.githubusercontent.com/startshineye/img/master/2017/9/9.png" alt=""></p>
<h6 id="2-2-Controller或者Service通过实现EnvironmentAware接口"><a href="#2-2-Controller或者Service通过实现EnvironmentAware接口" class="headerlink" title="2.2 Controller或者Service通过实现EnvironmentAware接口"></a>2.2 Controller或者Service通过实现EnvironmentAware接口</h6><p>@Controller @Service 等被Spring管理的类都支持，注意重写的方法 setEnvironment 是在系统启动的时候被执行.  </p>
<pre><code>import org.springframework.context.EnvironmentAware;
import org.springframework.core.env.Environment;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;
import com.yxm.web.entity.Hello;
/**
* 使用@RestController代替@controller和@ResponseBody
* @author yxm
*/
@RestController
public class HelloController implements EnvironmentAware{

private String JAVA_HOME;

@RequestMapping(&quot;/hello&quot;)
public Hello hello(){

    Hello hello = new  Hello();
    hello.setId(110);
    hello.setName(JAVA_HOME);
    return hello;
}
//在程序一启动就执行
public void setEnvironment(Environment environment) {
    JAVA_HOME = environment.getProperty(&quot;JAVA_HOME&quot;);
     System.out.println(&quot;Controller里获取参数  [&quot;+JAVA_HOME+&quot;]&quot;);
 }
}
</code></pre><p><img src="https://raw.githubusercontent.com/startshineye/img/master/2017/9/10.png" alt=""></p>
<h6 id="2-3-通过-ConfigurationProperties-读取application属性配置文件中的属性"><a href="#2-3-通过-ConfigurationProperties-读取application属性配置文件中的属性" class="headerlink" title="2.3 通过@ConfigurationProperties 读取application属性配置文件中的属性"></a>2.3 通过@ConfigurationProperties 读取application属性配置文件中的属性</h6><p>1.加入依赖  </p>
<pre><code>&lt;!--spring-boot-configuration:spring boot 配置处理器; --&gt;
 &lt;dependency&gt;
       &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
       &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;
       &lt;optional&gt;true&lt;/optional&gt;
 &lt;/dependency&gt;
</code></pre><p>2.@ConfigurationProperties 读取application属性配置文件中的属性。</p>
<pre><code>@Configuration
@ConditionalOnClass(Mongo.class)
@EnableConfigurationProperties(MongoProperties.class)
public class MongoAutoConfiguration {

@Autowired
private MongoProperties properties;

}
</code></pre><ol>
<li>@ConditionOnClass表明该@Configuration仅仅在一定条件下才会被加载，这里的条件是Mongo.class位于类路径上</li>
<li>@EnableConfigurationProperties将Spring Boot的配置文件（application.properties）中的spring.data.mongodb.*属性映射为MongoProperties并注入到MongoAutoConfiguration中。</li>
<li><p>@ConditionalOnMissingBean说明Spring Boot仅仅在当前上下文中不存在Mongo对象时，才会实例化一个Bean。这个逻辑也体现了Spring Boot的另外一个特性——自定义的Bean优先于框架的默认配置，我们如果显式的在业务代码中定义了一个Mongo对象，那么Spring Boot就不再创建。</p>
<p> @ConfigurationProperties(prefix = “spring.data.mongodb”)<br> public class MongoProperties {</p>
<p> private String host;<br> privateint port = DBPort.PORT;<br> private String uri = “mongodb://localhost/test”;<br> private String database;</p>
<p> // … getters/ setters omitted<br> }</p>
</li>
</ol>
<p>它就是以spring.data.mongodb作为前缀的属性，然后通过名字直接映射为对象的属性，同时还包含了一些默认值。如果不配置，那么mongo.uri就是mongodb://localhost/test。  </p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/09/12/SpringBoot-23-SpringBoot环境变量读取和属性对象的绑定/" class="archive-article-date">
  	<time datetime="2017-09-12T04:59:42.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-09-12</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringBoot/">SpringBoot</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-jeecg-3-openwindow加载数据后操作数据后关闭窗口" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/11/jeecg-3-openwindow加载数据后操作数据后关闭窗口/">jeecg(3)-openwindow加载数据后操作数据后关闭窗口</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>在jeecg平台开发中,我们通过jeecg自带方法代开新的窗口  </p>
<pre><code>openwindow(&apos;备份文件加载2&apos;, &apos;xxx.do?xxList&amp;Id=&apos;+Id+&apos;,&quot;&quot;, 400, 200);
</code></pre><h4 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h4><p>打开的窗口用来加载数据:  </p>
<p><img src="https://raw.githubusercontent.com/startshineye/img/master/2017/9/13.gif" alt=""></p>
<p>js:  </p>
<pre><code>success:function(jsonObj){
          console.info(&quot;jsonObj&quot;,jsonObj);
          if(jsonObj.result==&quot;success&quot;){
              alert(&quot;加载成功&quot;);
            windowapi.opener.appDiv.setReloadCallBack(true); 
              windowapi.close();                                   
          }else{
             alert(&quot;加载失败&quot;);
          }
        }
</code></pre><p>通过 windowapi.close();关闭窗口,通过  windowapi.opener.appDiv.setReloadCallBack(true); 向父页面的函数传值。  </p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/09/11/jeecg-3-openwindow加载数据后操作数据后关闭窗口/" class="archive-article-date">
  	<time datetime="2017-09-11T05:47:21.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-09-11</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Jeecg/">Jeecg</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-jeecg-2-使用DOM自带的confirm方法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/11/jeecg-2-使用DOM自带的confirm方法/">jeecg(2)-使用DOM自带的confirm方法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>开发中,我们需要使用DOM自带的confirm方法,但是由于项目是基于jeecg框架,使用confirm方法老是得不到预期效果</p>
<h4 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h4><p>查看jeecg封装的js文件可以知道,目录WebRoot/plug-in/tools/curdtools_zh-cn.js下.confirm已经被其覆盖了，</p>
<pre><code>// 普通询问操作调用函数
function confirm(url, content,name) {
 createdialog(&apos;提示信息 &apos;, content, url,name);
}

/**
* 创建询问窗口
* 
* @param title
* @param content
* @param url
*/
function createdialog(title, content, url,name) {
 $.dialog.setting.zIndex = getzIndex(true);
 $.dialog.confirm(content, function(){
    doSubmit(url,name);
    rowid = &apos;&apos;;
 }, function(){
 });
}
</code></pre><p>我们可以通过将其名字改为：jeecgconfirm来避免以上情况  </p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/09/11/jeecg-2-使用DOM自带的confirm方法/" class="archive-article-date">
  	<time datetime="2017-09-11T04:01:47.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-09-11</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Jeecg/">Jeecg</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-jeecg-1-js方法存放文件" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/11/jeecg-1-js方法存放文件/">jeecg(1)-js方法存放文件</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>jeecg对很多插件进行了封装,其中也包括js的封装,对于初学者来说,不容易找到jeecg封装的js文件,本人也是摸索查询才知道的</p>
<h4 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h4><p>在JEECG程序中，设计到的公共方法存放在webRoot/plug-in/tools/curdtools.js中,以下代码经过: <t:base type="jquery,easyui,tools,DatePicker"></t:base>引入对应的jquery,easyui和自己 封装的 js在tools里面  </p>
<pre><code>&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;
pageEncoding=&quot;UTF-8&quot;%&gt;
&lt;%@include file=&quot;/context/mytags.jsp&quot;%&gt;
&lt;t:base type=&quot;jquery,easyui,tools,DatePicker&quot;&gt;&lt;/t:base&gt; 
&lt;div class=&quot;easyui-layout&quot; fit=&quot;true&quot;&gt;
&lt;div region=&quot;center&quot; style=&quot;padding:0px;border:0px&quot;&gt;
    &lt;t:datagrid name=&quot;rootflowList&quot; checkbox=&quot;false&quot; fitColumns=&quot;true&quot;
         actionUrl=&quot;flowController.do?listFileFlow&amp;rootActId=0&quot; idField=&quot;id&quot;
        fit=&quot;true&quot; queryMode=&quot;group&quot;&gt;
        &lt;t:dgCol title=&quot;主键&quot; field=&quot;id&quot; hidden=&quot;true&quot; width=&quot;120&quot;&gt;&lt;/t:dgCol&gt;
        &lt;t:dgCol title=&quot;文件名&quot; field=&quot;fileName&quot; hidden=&quot;true&quot; width=&quot;120&quot;&gt;&lt;/t:dgCol&gt;
        &lt;t:dgCol title=&quot;名称&quot; field=&quot;showName&quot; query=&quot;false&quot; queryMode=&quot;single&quot; width=&quot;120&quot;&gt;&lt;/t:dgCol&gt;          
        &lt;t:dgCol title=&quot;最后修改时间&quot; field=&quot;createTime&quot;  queryMode=&quot;single&quot; width=&quot;180&quot;&gt;&lt;/t:dgCol&gt;
        &lt;t:dgCol title=&quot;操作&quot; field=&quot;opt&quot; width=&quot;100&quot;&gt;&lt;/t:dgCol&gt;
        &lt;t:dgFunOpt funname=&quot;editRootFlow(id,fileName)&quot; title=&quot;加载&quot;&gt;&lt;/t:dgFunOpt&gt;     
    &lt;/t:datagrid&gt;
&lt;/div&gt;
&lt;/div&gt;
</code></pre><p>在WebRoot/plug-in/tools/curdtools_zh-cn.js中定义了自己方法:  </p>
<pre><code>/**
* 添加事件打开窗口
* @param title 编辑框标题
* @param addurl//目标页面地址
*/
function add(title,addurl,gname,width,height) {
gridname=gname;
createwindow(title, addurl,width,height);
}

// 普通询问操作调用函数
function jeecgconfirm(url, content,name) {
createdialog(&apos;提示信息 &apos;, content, url,name);
}
</code></pre>
      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/09/11/jeecg-1-js方法存放文件/" class="archive-article-date">
  	<time datetime="2017-09-11T03:49:04.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-09-11</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Jeecg/">Jeecg</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/8/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><a class="page-number" href="/page/11/">11</a><span class="space">&hellip;</span><a class="page-number" href="/page/38/">38</a><a class="extend next" rel="next" href="/page/10/">Next &raquo;</a>
    </nav>
  


      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2018 Startshineye
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: "/",
		innerArchive: true
	}
</script>

<script src="/./main.js"></script>


    
<div class="tools-col">
  <ul class="btn-wrap">
    
      <li class="chose" data-hook="tools-section-all"><span class="text">全部</span><i class="icon-book"></i></li>
    
    
      <li data-hook="tools-section-tag"><span class="text">标签</span><i class="icon-price-tags"></i></li>
    
    
      <li data-hook="tools-section-friends"><span class="text">友链</span><i class="icon-link"></i></li>
    
    
      <li data-hook="tools-section-me"><span class="text">我</span><i class="icon-smile"></i></li>
    
  </ul>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all chose">
    	</section>
    

    
    	<section class="tools-section tools-section-tag">
    			<div class="widget tagcloud" id="js-tagcloud">
    				<a href="/tags/Android/" style="font-size: 20px;">Android</a> <a href="/tags/CTI/" style="font-size: 11.25px;">CTI</a> <a href="/tags/Cookie/" style="font-size: 10.63px;">Cookie</a> <a href="/tags/DevelopmentSkills/" style="font-size: 10px;">DevelopmentSkills</a> <a href="/tags/Easyui/" style="font-size: 10px;">Easyui</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/Github/" style="font-size: 10px;">Github</a> <a href="/tags/Http/" style="font-size: 10px;">Http</a> <a href="/tags/IE问题/" style="font-size: 10px;">IE问题</a> <a href="/tags/JDK/" style="font-size: 10px;">JDK</a> <a href="/tags/JSP/" style="font-size: 10px;">JSP</a> <a href="/tags/JVM/" style="font-size: 12.5px;">JVM</a> <a href="/tags/JavaSE/" style="font-size: 16.25px;">JavaSE</a> <a href="/tags/Jeecg/" style="font-size: 11.88px;">Jeecg</a> <a href="/tags/Maven/" style="font-size: 10px;">Maven</a> <a href="/tags/MongoDB/" style="font-size: 10px;">MongoDB</a> <a href="/tags/Myeclipse/" style="font-size: 15px;">Myeclipse</a> <a href="/tags/Netty/" style="font-size: 15.63px;">Netty</a> <a href="/tags/Node-js/" style="font-size: 10px;">Node.js</a> <a href="/tags/Oracle/" style="font-size: 17.5px;">Oracle</a> <a href="/tags/Redis/" style="font-size: 12.5px;">Redis</a> <a href="/tags/Servlet/" style="font-size: 11.88px;">Servlet</a> <a href="/tags/Spring/" style="font-size: 10.63px;">Spring</a> <a href="/tags/Spring-Boot/" style="font-size: 10px;">Spring Boot</a> <a href="/tags/SpringBoot/" style="font-size: 19.38px;">SpringBoot</a> <a href="/tags/SpringMVC/" style="font-size: 11.25px;">SpringMVC</a> <a href="/tags/Tomcat/" style="font-size: 10px;">Tomcat</a> <a href="/tags/Vue/" style="font-size: 18.75px;">Vue</a> <a href="/tags/Vue-js-前端开发-快速入门与专业应用/" style="font-size: 18.13px;">Vue.js+前端开发+快速入门与专业应用</a> <a href="/tags/Weblogic/" style="font-size: 12.5px;">Weblogic</a> <a href="/tags/Websocket/" style="font-size: 10.63px;">Websocket</a> <a href="/tags/Work-Problem/" style="font-size: 10px;">Work-Problem</a> <a href="/tags/easyui/" style="font-size: 10px;">easyui</a> <a href="/tags/hibernate/" style="font-size: 10.63px;">hibernate</a> <a href="/tags/html-css/" style="font-size: 10.63px;">html+css</a> <a href="/tags/html-css/" style="font-size: 16.25px;">html-css</a> <a href="/tags/html-ss/" style="font-size: 10px;">html-ss</a> <a href="/tags/im/" style="font-size: 14.38px;">im</a> <a href="/tags/jQuery/" style="font-size: 12.5px;">jQuery</a> <a href="/tags/java/" style="font-size: 10px;">java</a> <a href="/tags/java-String/" style="font-size: 10px;">java String</a> <a href="/tags/javaSE/" style="font-size: 10.63px;">javaSE</a> <a href="/tags/javaWeb/" style="font-size: 10px;">javaWeb</a> <a href="/tags/javascript/" style="font-size: 11.25px;">javascript</a> <a href="/tags/java并发编程/" style="font-size: 11.88px;">java并发编程</a> <a href="/tags/java集合/" style="font-size: 10.63px;">java集合</a> <a href="/tags/junit测试/" style="font-size: 10px;">junit测试</a> <a href="/tags/life/" style="font-size: 10px;">life</a> <a href="/tags/linux/" style="font-size: 12.5px;">linux</a> <a href="/tags/log4j/" style="font-size: 11.88px;">log4j</a> <a href="/tags/maven/" style="font-size: 10px;">maven</a> <a href="/tags/netty/" style="font-size: 11.88px;">netty</a> <a href="/tags/nginx/" style="font-size: 10px;">nginx</a> <a href="/tags/nodeJs/" style="font-size: 10px;">nodeJs</a> <a href="/tags/redis/" style="font-size: 13.13px;">redis</a> <a href="/tags/servlet/" style="font-size: 10px;">servlet</a> <a href="/tags/sockJs/" style="font-size: 10px;">sockJs</a> <a href="/tags/socket网络编程/" style="font-size: 10.63px;">socket网络编程</a> <a href="/tags/struts1/" style="font-size: 11.25px;">struts1</a> <a href="/tags/vue/" style="font-size: 10.63px;">vue</a> <a href="/tags/web/" style="font-size: 10px;">web</a> <a href="/tags/weblogic/" style="font-size: 11.25px;">weblogic</a> <a href="/tags/websocket/" style="font-size: 11.25px;">websocket</a> <a href="/tags/work/" style="font-size: 10px;">work</a> <a href="/tags/代理/" style="font-size: 11.88px;">代理</a> <a href="/tags/前端/" style="font-size: 10.63px;">前端</a> <a href="/tags/动手写一个MVC/" style="font-size: 12.5px;">动手写一个MVC</a> <a href="/tags/反射/" style="font-size: 16.88px;">反射</a> <a href="/tags/异常/" style="font-size: 10px;">异常</a> <a href="/tags/微博/" style="font-size: 10px;">微博</a> <a href="/tags/文件读取/" style="font-size: 10px;">文件读取</a> <a href="/tags/泛型/" style="font-size: 13.75px;">泛型</a> <a href="/tags/注解/" style="font-size: 11.25px;">注解</a> <a href="/tags/类加载器/" style="font-size: 13.75px;">类加载器</a> <a href="/tags/线程/" style="font-size: 10px;">线程</a> <a href="/tags/自己写一个apache服务器/" style="font-size: 17.5px;">自己写一个apache服务器</a> <a href="/tags/转载/" style="font-size: 12.5px;">转载</a> <a href="/tags/集合/" style="font-size: 12.5px;">集合</a>
    			</div>
    	</section>
    

    
    	<section class="tools-section tools-section-friends">
  		
  			<div class="friends-wrap" id="js-friends">
  			
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.baidu.com/">baidu</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.jd.com/">jd</a>
  	        
  	        </div>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">毕业于&lt;br&gt;相信技术可以改变人与人之间的生活&lt;br&gt;码农一枚</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>